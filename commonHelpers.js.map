{"version":3,"file":"commonHelpers.js","sources":["../src/js/index.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst apiKey = '42208037-79ed24c913e3ae53795b11edc';\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nlet currentPage = 1;\nlet hoorayMessage = false;\nlet searchQuery = '';\nlet totalImagesAvailable = 0;\n\nlet loadMoreBtn = document.getElementById('loadMoreBtn');\n\nif (!loadMoreBtn) {\n  loadMoreBtn = document.createElement('button');\n  loadMoreBtn.id = 'loadMoreBtn';\n  loadMoreBtn.textContent = 'Load More';\n  document.body.appendChild(loadMoreBtn);\n  loadMoreBtn.style.display = 'none';\n}\n\nconst simpleLightbox = new SimpleLightbox('.gallery a');\n\nasync function searchImages(query) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: apiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: 40,\n      },\n    });\n\n    totalImagesAvailable = response.data.totalHits;\n\n    if (currentPage === 1) {\n      showTotalHitsMessage(response.data.totalHits);\n    }\n    return response.data.hits;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return [];\n  }\n}\n\nfunction showTotalHitsMessage(totalHits) {\n  if (totalHits > 0 && !hoorayMessage) {\n    iziToast.success({\n      title: 'Hooray!',\n      message: `We found ${totalHits} images.`,\n      timeout: 2500,\n    });\n    hoorayMessage = true;\n  }\n}\n\nfunction displayLargeImage(images) {\n  images.forEach(image => {\n    const card = document.createElement('a');\n    card.href = image.largeImageURL;\n    card.className = 'photo-card';\n    card.innerHTML = `\n<div class =\"info\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            <div class=\"card-info\">\n                <div class =\"card-list\"><p>Likes</p> ${image.likes}</div>\n                <div class =\"card-list\"><p>Views</p> ${image.views}</div>\n                <div class =\"card-list\"><p>Comments</p> ${image.comments}</div>\n                <div class =\"card-list\"><p>Downloads</p>${image.downloads}</div>\n            </div></div>\n        `;\n    gallery.appendChild(card);\n  });\n  simpleLightbox.refresh();\n\n  const loadedImagesCount = currentPage * 40;\n  if (loadedImagesCount >= totalImagesAvailable) {\n    loadMoreBtn.style.display = 'none';\n    setTimeout(() => {\n      iziToast.info({\n        title: 'End of Stock',\n        message: 'We are sorry, but you have reached end of search results',\n        position: 'bottomCenter',\n        timeout: 3000,\n      });\n    }, 2700);\n  } else {\n    loadMoreBtn.style.display = 'block';\n  }\n}\n\nsearchForm.addEventListener('submit', handlerSubmit);\nasync function handlerSubmit(event) {\n  event.preventDefault();\n  searchQuery = event.target.searchQuery.value.trim();\n  if (searchQuery) {\n    currentPage = 1;\n    gallery.innerHTML = '';\n    hoorayMessage = false;\n    loadMoreBtn.style.display = 'none';\n    const images = await searchImages(searchQuery);\n    if (images.length > 0) {\n      displayLargeImage(images);\n    } else {\n      iziToast.warning({\n        title: 'Sorry',\n        message: 'No images found for your query. Please try again.',\n      });\n    }\n  }\n}\n\nloadMoreBtn.addEventListener('click', handlerImg);\nasync function handlerImg() {\n  currentPage += 1;\n  const images = await searchImages(searchQuery);\n  displayLargeImage(images);\n}\n"],"names":["apiKey","searchForm","gallery","currentPage","hoorayMessage","searchQuery","totalImagesAvailable","loadMoreBtn","simpleLightbox","SimpleLightbox","searchImages","query","response","axios","showTotalHitsMessage","error","totalHits","iziToast","displayLargeImage","images","image","card","handlerSubmit","event","handlerImg"],"mappings":"owBAMA,MAAMA,EAAS,qCACTC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAAc,EACdC,EAAgB,GAChBC,EAAc,GACdC,EAAuB,EAEvBC,EAAc,SAAS,eAAe,aAAa,EAElDA,IACHA,EAAc,SAAS,cAAc,QAAQ,EAC7CA,EAAY,GAAK,cACjBA,EAAY,YAAc,YAC1B,SAAS,KAAK,YAAYA,CAAW,EACrCA,EAAY,MAAM,QAAU,QAG9B,MAAMC,EAAiB,IAAIC,EAAe,YAAY,EAEtD,eAAeC,EAAaC,EAAO,CACjC,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKb,EACL,EAAGW,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMR,EACN,SAAU,EACX,CACP,CAAK,EAED,OAAAG,EAAuBM,EAAS,KAAK,UAEjCT,IAAgB,GAClBW,EAAqBF,EAAS,KAAK,SAAS,EAEvCA,EAAS,KAAK,IACtB,OAAQG,EAAP,CACA,eAAQ,MAAM,yBAA0BA,CAAK,EACtC,EACR,CACH,CAEA,SAASD,EAAqBE,EAAW,CACnCA,EAAY,GAAK,CAACZ,IACpBa,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,YAAYD,YACrB,QAAS,IACf,CAAK,EACDZ,EAAgB,GAEpB,CAEA,SAASc,EAAkBC,EAAQ,CACjCA,EAAO,QAAQC,GAAS,CACtB,MAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAOD,EAAM,cAClBC,EAAK,UAAY,aACjBA,EAAK,UAAY;AAAA;AAAA,wBAEGD,EAAM,sBAAsBA,EAAM;AAAA;AAAA,uDAEHA,EAAM;AAAA,uDACNA,EAAM;AAAA,0DACHA,EAAM;AAAA,0DACNA,EAAM;AAAA;AAAA,UAG5DlB,EAAQ,YAAYmB,CAAI,CAC5B,CAAG,EACDb,EAAe,QAAO,EAEIL,EAAc,IACfG,GACvBC,EAAY,MAAM,QAAU,OAC5B,WAAW,IAAM,CACfU,EAAS,KAAK,CACZ,MAAO,eACP,QAAS,2DACT,SAAU,eACV,QAAS,GACjB,CAAO,CACF,EAAE,IAAI,GAEPV,EAAY,MAAM,QAAU,OAEhC,CAEAN,EAAW,iBAAiB,SAAUqB,CAAa,EACnD,eAAeA,EAAcC,EAAO,CAGlC,GAFAA,EAAM,eAAc,EACpBlB,EAAckB,EAAM,OAAO,YAAY,MAAM,KAAI,EAC7ClB,EAAa,CACfF,EAAc,EACdD,EAAQ,UAAY,GACpBE,EAAgB,GAChBG,EAAY,MAAM,QAAU,OAC5B,MAAMY,EAAS,MAAMT,EAAaL,CAAW,EACzCc,EAAO,OAAS,EAClBD,EAAkBC,CAAM,EAExBF,EAAS,QAAQ,CACf,MAAO,QACP,QAAS,mDACjB,CAAO,CAEJ,CACH,CAEAV,EAAY,iBAAiB,QAASiB,CAAU,EAChD,eAAeA,GAAa,CAC1BrB,GAAe,EACf,MAAMgB,EAAS,MAAMT,EAAaL,CAAW,EAC7Ca,EAAkBC,CAAM,CAC1B"}